
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.min.js" integrity="sha512-2ImtlRlf2VVmiGZsjm9bEyhjGW4dU7B6TNwh/hx/iSByxNENtj3WVE6o/9Lj4TJeVXPi4bnOIMXFIJJAeufa0A==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/css/select2.min.css" integrity="sha512-nMNlpuaDPrqlEls3IX/Q56H36qvBASwb3ipuo3MxeWbsQB1881ox0cRv7UPTgBlriqoynt35KjEwgGUeUXIPnw==" crossorigin="anonymous" referrerpolicy="no-referrer" />

<%= form_with(model: @developer, html: {novalidate: 'novalidate', class: 'needs-validation'}) do |f| %>
  <% if @developer.errors.any? %>
    <div style="color: red">
      <h2><%= pluralize(@developer.errors.count, "error") %> prohibited this developer from being saved:</h2>

      <ul>
        <% @developer.errors.each do |error| %>
          <li><%= @error.full_message %></li>
        <% end %>
      </ul>
    </div>
  <% end %>

  <h1 class='pb-3'>Din udvikler profil</h1>

  <div class='bg-white rounded p-4 shadow-sm'>
    <div class='row'>
      <div class='col-md-3'>
        <div class='fs-5 fw-semibold'>Profil</div>
        <div class='text-muted'>Denne information vil vises offentligt, så gør dig umage med, hvad du deler.</div>
      </div>
      <div class='col-md-9'>
        <div class='py-3'>
          <div class="row g-3">
            <div class="col">
              <label for='developer_first_name' class='text-muted'>Fornavn</label>
              <%= f.text_field :first_name, class: 'form-control shadow-sm', required: true %>
              <div class="invalid-feedback">
                Skriv fornavn
              </div>
              <div class="valid-feedback">
                👍🏼
              </div>
            </div>
            <div class="col">
              <label for='developer_last_name' class='text-muted'>Efternavn</label>
              <%= f.text_field :last_name, class: 'form-control shadow-sm', required: true %>
              <div class="invalid-feedback">
                Skriv efternavn
              </div>
              <div class="valid-feedback">
                👍🏼
              </div>
            </div>
          </div>
        </div>

        <div class='py-3'>
          <div class="row g-3">
            <div class="col">
              <label for='developer_title' class='text-muted'>Titel</label>
              <%= f.text_field :title, class: 'form-control shadow-sm', required: true %>
              <div class="invalid-feedback">
                Skriv titel
              </div>
              <div class="valid-feedback">
                👍🏼
              </div>
            </div>
            <div class="col">
              <label for="developer_city" class="text-muted">Postnummer</label>
              <select name='developer[city]' id="developer_city" class='form-control select2' required>
                <option selected='selected'>Vælg by</option>
                <%= zip_codes.each do |zip| %>
                  <option value='<%= zip[0] %>'><%= zip[0] %> <%= zip[1] %></option>
                <% end %>
              </select>
              <div class="invalid-feedback">
                Vælg postnummer
              </div>
              <div class="valid-feedback">
                👍🏼
              </div>
            </div>
          </div>
        </div>

        <div class='py-3'>
          <label for='developer_about' class='text-muted'>Bio</label>
          <%= f.text_area :about, class: 'form-control shadow-sm', required: true %>
          <div class="invalid-feedback">
            Skriv lidt om dig self
          </div>
          <div class="valid-feedback">
            👍🏼
          </div>
        </div>

        <div class='py-3'>
          <div class="row g-3">
            <div class="col-6">
              <label for='developer_profile_picture' class='text-muted'>Profil billede</label>
              <%= f.file_field :profile_picture, class: 'form-control shadow-sm', required: true %>
              <div class="invalid-feedback">
                Velg et profil billede. Dette øger dine chancer for at blive kontaktet.
              </div>
              <div class="valid-feedback">
                👍🏼
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>


  <div class='bg-white rounded p-4 mt-5 shadow-sm'>
    <div class='row'>
      <div class='col-md-3'>
        <div class='fs-5 fw-semibold'>Arbejds præferencer</div>
        <div class='text-muted'>Hvilken slags arbejde leder du efter?</div>
      </div>
      <div class='col-md-9'>
        <div class='py-3'>
          <div class='fs-5 pb-3'>Søge status</div>
          <div class="form-check py-2">
            <input class="form-check-input" type="radio" name="developer[search_status]" id="developer_search_status_actively_looking" value='is_active' checked>
            <label class="form-check-label pointer" for="developer_search_status_actively_looking">
              Søger aktivt
              <div class='text-muted'>Din profil er offentlig</div>
            </label>
          </div>
          <div class="form-check py-2">
            <input class="form-check-input" type="radio" name="developer[search_status]" id="developer_search_status_unavailable" value='unavailable'>
            <label class="form-check-label pointer" for="developer_search_status_unavailable">
              Ikke ledig pt
              <div class='text-muted'>Din profil er offentlig</div>
            </label>
          </div><div class="form-check py-2">
            <input class="form-check-input" type="radio" name="developer[search_status]" id="developer_search_status_invisible" value='invisible'>
            <label class="form-check-label pointer" for="developer_search_status_invisible">
              Ikke synlig
              <div class='text-muted'>Din profil er skjult</div>
            </label>
          </div>
        </div>

        <div class='py-3'>
          <div class='fs-5 pb-3'>Hvilken type(r) søger du?</div>
          <div class="form-check py-2">
            <input class="form-check-input" name='developer[role_types][]' type="checkbox" value="fulltime" id="developer_role_types_fulltime" <%= 'checked' unless current_account.developer && current_account.developer.role_types.exclude?('fulltime') %>>
            <label class="form-check-label pointer" for="developer_role_types_fulltime">
              Fuldtid
            </label>
          </div>
          <div class="form-check py-2">
            <input class="form-check-input" name='developer[role_types][]' type="checkbox" value="parttime" id="developer_role_types_parttime">
            <label class="form-check-label pointer" for="developer_role_types_parttime">
              Deltid
            </label>
          </div>
          <div class="form-check py-2">
            <input class="form-check-input" name='developer[role_types][]' type="checkbox" value="remote" id="developer_role_types_remote">
            <label class="form-check-label pointer" for="developer_role_types_remote">
              Remote
            </label>
          </div>
          <div class="form-check py-2">
            <input class="form-check-input" name='developer[role_types][]' type="checkbox" value="on_site" id="developer_role_types_on_site">
            <label class="form-check-label pointer" for="developer_role_types_on_site">
              On site
            </label>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class='bg-white rounded p-4 mt-5 shadow-sm'>
    <div class='row'>
      <div class='col-md-3'>
        <div class='fs-5 fw-semibold'>Online tilstedeværelse</div>
        <div class='text-muted'>Hvor kan man se og lære mere om dig?</div>
      </div>
      <div class='col-md-9'>
        <div class='py-3'>
          <div class="row g-3">
            <div class="col">
              <label for='developer_website' class='text-muted'>Website</label>
              <%= f.url_field :website, class: 'form-control shadow-sm' %>
            </div>
            <div class="col">
              <label for='developer_github' class='text-muted'>Github</label>
              <%= f.url_field :github, class: 'form-control shadow-sm' %>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class='bg-white rounded p-4 mt-5 shadow-sm'>
    <div class='row'>
      <div class='col-md-3'>
        <div class='fs-5 fw-semibold'>Email notifikationer</div>
      </div>
      <div class='col-md-9'>
        <div class='py-3'>
          <div class="form-check py-2">
            <input class="form-check-input" name='developer[allow_notifications]' type="checkbox" value="true" id="developer_allow_notifications" <%= 'checked' if current_account.developer && current_account.developer.allow_notifications || !current_account.developer %>>
            <label class="form-check-label pointer" for="developer_allow_notifications">
              Tillad email notifikationer
            </label>
          </div>
        </div>
      </div>
    </div>
  </div>


  <div class='text-end pt-3'>
    <%= f.submit 'Opret profil', class: 'btn btn-primary shadow-sm' %>
  </div>

<% end %>


<script>
// Example starter JavaScript for disabling form submissions if there are invalid fields
(() => {
  'use strict'

  // Fetch all the forms we want to apply custom Bootstrap validation styles to
  const forms = document.querySelectorAll('.needs-validation')

  // Loop over them and prevent submission
  Array.from(forms).forEach(form => {
    form.addEventListener('submit', event => {
      if (!form.checkValidity()) {
        event.preventDefault()
        event.stopPropagation()
      }

      form.classList.add('was-validated')
    }, false)
  })
})()
</script>


<script>
  $('.select2').select2({
   "language": {
       "noResults": function(){
        return "Ingen resultater";
       }
   },
    escapeMarkup: function (markup) {
        return markup;
    }
  });
</script>